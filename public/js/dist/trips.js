"use strict";function Trips(t){this.outlets=t,this.path=[],this.elevationService=new google.maps.ElevationService,this.elements={button:document.querySelectorAll(".btn-danger")},this.init()}Trips.prototype.getElevationPoints=function(){this.elevationService.getElevationAlongPath({path:this.path,samples:50},this.plotElevation.bind(this))},Trips.prototype.plotElevation=function(t,e){if(console.log(t,e),console.log(this.outlet),"OK"!==e)return this.outlet.innerHTML="Cannot show elevation: request failed because "+e,void 0;var i=new google.visualization.LineChart(this.outlet),o=new google.visualization.DataTable;o.addColumn("string","Sample"),o.addColumn("number","Elevation");for(var n=0;n<t.length;n++)o.addRow(["",t[n].elevation]);i.draw(o,{height:200,legend:"none",titleY:"Elevation (m)"})},Trips.prototype.constructPath=function(){Array.prototype.forEach.call(this.outlets,function(t){0!=t.dataset.route&&(JSON.parse(t.dataset.route).forEach(function(t){this.path.push({lat:+t.location.latitude,lng:+t.location.longitude})}.bind(this)),this.outlet=t,this.getElevationPoints())}.bind(this))},Trips.prototype.init=function(){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){this.constructPath(),$(this.elements.button).on("click",function(t){t.preventDefault(),$(this).text("Deleting"),$.ajax({url:"/trips/"+$(this).data("index"),type:"DELETE",success:function(){$(this).closest(".trip").fadeOut()}.bind(this)})})}.bind(this))};
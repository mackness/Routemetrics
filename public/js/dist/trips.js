"use strict";function Trips(t){this.outlets=t,this.elevationService=new google.maps.ElevationService,this.elements={button:document.querySelectorAll(".btn-danger"),outlets:document.querySelectorAll(".chart__outlet")},this.init()}Trips.prototype.getElevationPoints=function(t,e){this.elevationService.getElevationAlongPath({path:e,samples:50},this.plotElevation.bind(this,t))},Trips.prototype.plotElevation=function(t,e,i){if("OK"!==i)return t.innerHTML="Cannot show elevation: request failed because "+i,void 0;var o=new google.visualization.LineChart(t),n=new google.visualization.DataTable;n.addColumn("string","Sample"),n.addColumn("number","Elevation");for(var a=0;a<e.length;a++)n.addRow(["",e[a].elevation]);o.draw(n,{height:200,legend:"none",titleY:"Elevation (m)"})},Trips.prototype.constructPath=function(){Array.prototype.forEach.call(this.outlets,function(t){if(0!=t.dataset.route){var e=JSON.parse(t.dataset.route).map(function(t){return{lat:+t.location.latitude,lng:+t.location.longitude}});this.getElevationPoints(t,e)}}.bind(this))},Trips.prototype.init=function(){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){this.constructPath(),$(this.elements.button).on("click",function(t){t.preventDefault(),$(this).text("Deleting"),$.ajax({url:"/trips/"+$(this).data("index"),type:"DELETE",success:function(){$(this).closest(".trip").fadeOut()}.bind(this)})})}.bind(this))};